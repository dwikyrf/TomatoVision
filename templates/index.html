<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    .modal-dialog {
        max-width: 800px; /* Adjust the maximum width of the modal */
    }
    .modal-content {
        width: 100%;
        max-width: 800px; /* Adjust the maximum width of the modal content */
        margin: auto;
    }
    .video-container img {
        width: 100%;
        height: auto; /* Ensure the video feed image fits well within the container */
    }
    #cameraModalLabel {
            color: black; /* Set the color of the title text to black */
        }
    #uploadModalLabel {
            color: black; /* Set the color of the title text to black */
        }    
</style>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>TomatoVision - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
<!-- Favicons -->
<link href="{{ url_for('static', filename='assets/img/favicon.png') }}" rel="icon">
<link href="{{ url_for('static', filename='assets/img/apple-touch-icon.png' ) }}" rel="apple-touch-icon">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

<!-- Vendor CSS Files -->
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/bootstrap/css/bootstrap.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/glightbox/css/glightbox.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/remixicon/remixicon.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/animate.css/animate.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/bootstrap-icons/bootstrap-icons.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/boxicons/css/boxicons.min.css') }}">

<!-- Template Main CSS File -->
<link href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet">


  <!-- =======================================================
  * Template Name: Sailor
  * Template URL: https://bootstrapmade.com/sailor-free-bootstrap-theme/
  * Updated: Mar 17 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center">

      <h1 class="logo me-auto"><a href="/">Tomato<span>Vision</span/a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo me-auto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
      <nav id="navbar" class="navbar">
        <ul> 
          <a href="/">Home</a>  
          <li><a href="about">About Us</a></li>
          <li><a href="contact">Contact</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
    <div class="navbar extra">
 <a href="#" id="camera"><i data-feather="camera"></i></a>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero">
    <div id="heroCarousel" data-bs-interval="5000" class="carousel slide carousel-fade" data-bs-ride="carousel">

      <div class="carousel-inner" role="listbox"></div>

        <!-- Slide 1 -->
        <div class="carousel-item active" style="background-image: url('{{ url_for('static', filename='assets/img/slide/TOMAT6.jpg') }}')">
          <div class="carousel-container">
            <div class="container">
              <h2 class="animate__animated animate__fadeInDown">Welcome to<Span>
              </Span>TOMATO<span>VISION</span></h2>
              <p class="animate__animated animate__fadeInUp">TomatoVision adalah website canggih yang digunakan untuk mengidentifikasi penyakit pada tanaman tomat dengan akurat dan efisien, sangat membantu dan memudahkan para pengguna untuk mendapatkan informasi tentang kesehatan tanaman tomat </p>
              <a href="{{ url_for('about') }}" class="btn-get-started animate__animated animate__fadeInUp scrollto">Read More</a>
            </div>
          </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item" style="background-image: url('{{ url_for('static', filename='assets/img/slide/iniwebslidefoto2.jpg') }}')">
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item" style="background-image: url('{{ url_for('static', filename='assets/img/slide/webslide2.jpg') }}')">
        </div>

      </div>

      <a class="carousel-control-prev" href="#heroCarousel" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon bi bi-chevron-left" aria-hidden="true"></span>
      </a>

      <a class="carousel-control-next" href="#heroCarousel" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon bi bi-chevron-right" aria-hidden="true"></span>
      </a>

    </div>

  </header><!-- End Hero Section -->

    </section><!-- End About us -->

    <!-- ======= Services Section ======= -->
    <main id="main">
      <!-- About Us Section -->
      <section id="about" class="about">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <h2>About TomatoVision</h2>
              <p>Penggunaan website TomatoVision sangatlah mudah, pengguna cukup memasukkan gambar daun tomat yang sudah disiapkan sebelumnya, kemudian klik tombol analisis dan hasil analisis daun tomat akan keluar dalam waktu seperkian detik. Mudah bukan?...</p>
              <h4>Let's Try It...</h4>
              <h5>Masukkan gambar daun tomat yang ingin diidentifikasi</h5>
              <div class="row">
                <div class="d-flex justify-content-center">
                  <button type="button" class="btn-get-started" data-bs-toggle="modal" data-bs-target="#uploadModal">Upload & Analyze</button>
                </div>
                <div>
                  {% if filename %}
                  <h3>Result:</h3>
                  <img id="resultImage" src="{{ filename }}" alt="Detected Image" class="fixed-sized">
                  <h4>{{ label }}</h4>
                  {% endif %}
                </div>
                <div class="d-flex justify-content-center">
                  <button type="button" class="btn-get-started" data-bs-toggle="modal" data-bs-target="#cameraModal">Camera</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <!-- Upload Modal -->
      <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="uploadModalLabel">Upload & Analyze</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="uploadForm" method="POST" enctype="multipart/form-data">
                <input type="file" id="fileInput" name="file" accept="image/*" required>
                <button type="submit" class="btn-get-started">Upload & Analyze</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Camera Modal -->
      <div class="modal fade" id="cameraModal" tabindex="-1" aria-labelledby="cameraModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cameraModalLabel">Camera</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <h1>Tomato Disease Detector</h1>
                        <div class="video-container">
                            <img src="{{ url_for('video_feed') }}" alt="Video Feed">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </main><!-- End #main -->
          <!-- End Services Section -->

    <!-- ======= portfolio Section ======= -->
    <section id="portfolio" class="portfolio">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="portfolio-flters">
              <h2>Jenis-Jenis Penyakit Daun Tomat</h2>
            </ul>
          </div>
        </div>

        <div class="row portfolio-container">

          <div class="col-lg-4 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
              <img src="{{ url_for('static', filename='assets/img/portfolio/penyakit1.jpg') }}"class="img-fluid" alt="Penyakit 1">
              <div class="portfolio-info">
                <h4>Bercak Daun Septoria</h4>
                <p>Langkah pengendalian dengan menanam benih yang tahan, membersihkan gulma dan memusnahkan tanaman tomat yang terserang dengan cara membakarnya. Melakukan rotasi tanaman dan penyemprotan fungisida bahan aktif</p>
                <div class="portfolio-links">
                  <a href="{{ url_for('static', filename='assets/img/portfolio/penyakit1.jpg') }}" data-gallery="portfolioGallery" class="portfolio-lightbox" title="Bercak Daun Septoria"><i class="bx bx-plus"></i></a>
                  <a href="https://plantix.net/id/library/plant-diseases/100152/septoria-leaf-spot/" class="portfolio-details-lightbox" data-glightbox="type: external" title="portfolio Details"><i class="bx bx-link"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 portfolio-item filter-web">
            <div class="portfolio-wrap">
              <img src="{{ url_for('static', filename='assets/img/portfolio/penyakit2.jpg') }}" class="img-fluid" alt="Penyakit 2">
              <div class="portfolio-info">
                <h4>Bercak Daun Coklat (Alternaria)</h4>
                <p>Langkah pengendalian dengan menggunakan bibit unggul tahan penyakit, menjaga kebersihan lahan dan membakar tanaman yang terinfeksi. Drainase bagus, melakukan rotasi tanaman dan jarak tanam tidak terlalu rapat</p>
                <div class="portfolio-links">
                  <a href="{{ url_for('static', filename='assets/img/portfolio/penyakit2.jpg') }}" data-gallery="portfolioGallery" class="portfolio-lightbox" title="Bercak Daun Septoria"><i class="bx bx-plus"></i></a>
                  <a href="https://plantix.net/id/library/plant-diseases/100203/alternaria-black-spot-and-fruit-rot/" class="portfolio-details-lightbox" data-glightbox="type: external" title="portfolio Details"><i class="bx bx-link"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
              <img src="{{ url_for('static', filename='assets/img/portfolio/penyakit3.jpg') }}" class="img-fluid" alt="Penyakit 3">
              <div class="portfolio-info">
                <h4>Busuk Daun (Phytopthora)</h4>
                <p>Langkah pengendalian dengan drainase yang baik dan jarak tanam tidak terlalu rapat. Melakukan rotasi tanaman dan memusnahkan tanaman yang terinfeksi</p>
                <div class="portfolio-links">
                  <a href="{{ url_for('static', filename='assets/img/portfolio/penyakit3.jpg') }}" data-gallery="portfolioGallery" class="portfolio-lightbox" title="Bercak Daun Septoria"><i class="bx bx-plus"></i></a>
                  <a href="https://plantix.net/id/library/plant-diseases/100046/tomato-late-blight/" class="portfolio-details-lightbox" data-glightbox="type: external" title="portfolio Details"><i class="bx bx-link"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
              <img src="{{ url_for('static', filename='assets/img/portfolio/penyakit6.jpg') }}" class="img-fluid" alt="Penyakit 6">
              <div class="portfolio-info">
                <h4>Bercak Kerak Bakteri</h4>
                <p>Langkah pengendalian dengan cara merotasi tanaman, drainase yang baik dan memusnahkan tanaman yang sakit. Aplikasi kalsium dapat meningkatkan kekebalan tanaman tomat terhadap penyakit</p>
                <div class="portfolio-links">
                  <a href="{{ url_for('static', filename='assets/img/portfolio/penyakit6.jpg') }}" data-gallery="portfolioGallery" class="portfolio-lightbox" title="Bercak Daun Septoria"><i class="bx bx-plus"></i></a>
                  <a href="https://plantix.net/id/library/plant-diseases/300050/bacterial-spot-and-speck-of-tomato/" class="portfolio-details-lightbox" data-glightbox="type: external" title="portfolio Details"><i class="bx bx-link"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 portfolio-item filter-web">
            <div class="portfolio-wrap">
              <img src="{{ url_for('static', filename='assets/img/portfolio/penyakit5.jpg') }}" class="img-fluid" alt="Penyakit 5">
              <div class="portfolio-info">
                <h4>Kapang Daun Tomat</h4>
                <p>Langkah pengendalian dengan cara merotasi tanaman, drainase yang baik, menjaga kebersihan kebun dan menggunakan mulsa plastik terutama di musim hujan</p>
                <div class="portfolio-links">
                  <a href="{{ url_for('static', filename='assets/img/portfolio/penyakit5.jpg') }}" data-gallery="portfolioGallery" class="portfolio-lightbox" title="Bercak Daun Septoria"><i class="bx bx-plus"></i></a>
                  <a href="https://plantix.net/id/library/plant-diseases/100321/early-blight/" class="portfolio-details-lightbox" data-glightbox="type: external" title="portfolio Details"><i class="bx bx-link"></i></a>
                </div>
              </div>
            </div>
          </div>
         
        </div>

      </div>
    </section><!-- End portfolio Section -->

  </main><!-- End #main -->

 

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{{ url_for('static', filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/glightbox/js/glightbox.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/isotope-layout/isotope.pkgd.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/waypoints/noframework.waypoints.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/php-email-form/validate.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>


  <!-- Template Main JS File -->
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>


          <!-- Feather Icons -->
  <script>
    feather.replace();
  </script>
  <script>
    $(document).ready(function() {
        $('#uploadForm').on('submit', function(e) {
            e.preventDefault();
            var formData = new FormData(this);
            $.ajax({
                url: '/upload',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(data) {
                    if (data.error) {
                        alert(data.error);
                    } else {
                        $('#result-container').html('<h3>Result:</h3><img src="' + data.filename + '" alt="Detected Image"><h4>' + data.label + '</h4>');
                        $('#uploadModal').modal('hide');
                    }
                },
                error: function() {
                    alert('An error occurred while uploading the file.');
                }
            });
        });
    });
    </script>
    <style>
      .fixed-size {
        width: 480px;  /* Set the width you prefer */
        height: 720px; /* Set the height you prefer */
        object-fit: cover; /* This will ensure the image covers the specified dimensions without distorting */
      }
    </style>
</body>

</html>